"use strict";var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ErrorGun;(function(n){(function(t){var i=function(t){function i(){var i=this;t.call(this),this.NewContactEmail=ko.observable(""),this.NewContactEmailValid=ko.computed(function(){var n=i.NewContactEmail(),t;return n==null||n.length==0?!0:(t=/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,t.test(n))}),this.Create=function(){var t=$("#registerButton"),r;t.attr("disabled",!0),i.NewContactEmail(""),r=ko.toJSON(i),$.ajax({url:"/api/apps",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:r}).fail(function(r){var u=n.ErrorCodes.GetErrorMessages(r.responseText);i.ErrorMessage(u),t.removeAttr("disabled")}).done(function(n){$("input, button").attr("disabled",!0),i.ErrorMessage(""),i.ApiKey(n.ApiKey),i.Id(n.Id)})},this.AddContactEmail=function(){i.NewContactEmailValid()&&(i.ContactEmails.push(i.NewContactEmail()),i.NewContactEmail(""),$("#emailAddress").focus())},this.AddContactEmailOnEnter=function(n,t){var r=t.which?t.which:t.keyCode;return r===13?(i.AddContactEmail(),!1):!0},this.RemoveContactEmail=function(n){i.ContactEmails.remove(n),i.NewContactEmail(n),$("#emailAddress").focus()},this.toJSON=function(){return{Name:i.Name(),ContactEmails:i.ContactEmails()}}}return __extends(i,t),i}(t.App);t.AppCreate=i})(n.ViewModels||(n.ViewModels={}));var t=n.ViewModels})(ErrorGun||(ErrorGun={}))