"use strict";var ErrorGun;(function(n){(function(t){var i=function(){function n(n,t,i){typeof n=="undefined"&&(n=""),typeof t=="undefined"&&(t=!1),typeof i=="undefined"&&(i=!0),this.Address=ko.observable(n),this.Focused=ko.observable(t),this.CanRemove=ko.observable(i)}return n}(),r;t.ContactEmail=i,r=function(){function t(){var t=this;this.Id=ko.observable(""),this.ApiKey=ko.observable(""),this.CreatedTimestampUtc=ko.observable(""),this.Name=ko.observable(""),this.ContactEmails=ko.observableArray([new i("",!1,!1)]),this.ErrorMessage=ko.observable(""),this.Create=function(){var i=$("#registerButton"),r,u;i.attr("disabled",!0),r=$.grep(t.ContactEmails(),function(n){return n.CanRemove()&&!/\S/.test(n.Address())}),t.ContactEmails.removeAll(r),u=ko.toJSON(t),$.ajax({url:"/api/apps",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:u}).fail(function(r){var u="",f;try{f=JSON.parse(r.responseText),u=n.ErrorCodes.GetErrorMessages(f.ErrorCodes)}catch(e){u="An unexpected server error occurred."}t.ErrorMessage(u),i.removeAttr("disabled")}).done(function(n){$("input").attr("disabled",!0),t.ErrorMessage(""),t.ApiKey(n.ApiKey),t.Id(n.Id)})},this.AddContactEmail=function(){t.ContactEmails.push(new i("",!0,!0))},this.RemoveContactEmail=function(n){t.ContactEmails().length>1&&t.ContactEmails.remove(n)},this.toJSON=function(){return{Name:t.Name(),ContactEmails:ko.utils.arrayMap(t.ContactEmails(),function(n){return n.Address()})}}}return t}(),t.ViewModel=r})(n.AppCreate||(n.AppCreate={}));var t=n.AppCreate})(ErrorGun||(ErrorGun={}))