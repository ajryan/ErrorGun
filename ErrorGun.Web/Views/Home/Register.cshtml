@using ErrorGun.Web.App_Start

<h3 class="fourteen columns offset-by-one add-bottom">Register App</h3>
<div data-bind="visible: ErrorMessage" class="fourteen columns offset-by-one" style="display: none">
    <span data-bind="text: ErrorMessage" class="warning"></span>
</div>
<form data-bind="submit: Create" class="fourteen columns offset-by-one">
    <label for="name">App Name</label>
    <input type="text" id="name" data-bind="value: Name, hasfocus: true" />
    <div class="fourteen columns clearfix alpha">
        <div class="three columns alpha">
            <label for="">Contact Emails</label>
        </div>
        <div class="three columns omega">
            <a data-bind="click: AddContactEmail" class="ko-link">Add Contact</a>
        </div>
    </div>
    
    <ul data-bind="foreach: ContactEmails">
        <li>
            <input type="text" data-bind="value: Address, hasfocus: Focused" class="remove-bottom" style="display: inline-block"/>
            <a data-bind="click: $root.RemoveContactEmail" class="ko-link">[X]</a>
        </li>
    </ul>
    <input type="submit" id="registerButton" name="Register" value="Register" />
</form>
<div data-bind="visible: ApiKey" class="fourteen columns offset-by-one" style="display: none">
    <h2>App Created</h2>
    Id: <span data-bind="text: Id"></span>
    ApiKey: <span data-bind="text: ApiKey"></span>
</div>

@section EndBodyScripts {
    @Scripts.Render(AppScript.HomeRegister)
    <script>
        var viewModel = new ErrorGun.AppCreate.ViewModel('@Url.Action("AppComplete")');
        ko.applyBindings(viewModel);
    </script>
}
